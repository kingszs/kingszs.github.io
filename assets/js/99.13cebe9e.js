(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{678:function(e,t,a){"use strict";a.r(t);var n=a(11),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",{attrs:{align:"center"}},[a("img",{attrs:{width:"500",src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/84785388faaf4492ab25c152ed739b75~tplv-k3u1fbpfcp-watermark.image"}})]),e._v(" "),a("blockquote",[a("p",[e._v("拯救你的年底KPI：前端性能优化 🤔🤔🤔")])]),e._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),a("p",[a("code",[e._v("性能优化")]),e._v(" ，每个工程师跑不掉的一个话题。这里是本人结合"),a("a",{attrs:{href:"http://www.imooc.com/u/9139180/courses",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mr.Max"),a("OutboundLink")],1),e._v(" 的一门课，总结的一些优化手法，希望对大家有所帮助，后续也会继续更新。 演示源码和PPT有条件分享（"),a("code",[e._v("一个赞")]),e._v("👍），感谢各位大哥😎")]),e._v(" "),a("h3",{attrs:{id:"首发个人博客"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#首发个人博客"}},[e._v("#")]),e._v(" 首发个人博客")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://alexwjj.github.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("种一棵树，最好的时机是十年前，其次是现在"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"演示demo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#演示demo"}},[e._v("#")]),e._v(" 演示demo")]),e._v(" "),a("p",[a("a",{attrs:{href:"http://118.25.49.69:8085/",target:"_blank",rel:"noopener noreferrer"}},[e._v("在线预览"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/alexwjj/fe-optimize",target:"_blank",rel:"noopener noreferrer"}},[e._v("fe-optimize 源码"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ac0b17f19454e15a3ec8d654d7b7ece~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"演示ppt-一定要看-超帅"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#演示ppt-一定要看-超帅"}},[e._v("#")]),e._v(" 演示PPT (一定要看，超帅)")]),e._v(" "),a("p",[a("a",{attrs:{href:"http://118.25.49.69:8086/",target:"_blank",rel:"noopener noreferrer"}},[e._v("在线预览"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/alexwjj/fe-ppt",target:"_blank",rel:"noopener noreferrer"}},[e._v("fe-ppt 使用HTML做的PPT源码"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc3f5507f5b7415e95ec2c2b62131b22~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"前端性能的影响-长篇大论警告❗️❗️❗️"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端性能的影响-长篇大论警告❗️❗️❗️"}},[e._v("#")]),e._v(" 前端性能的影响（长篇大论警告❗️❗️❗️）")]),e._v(" "),a("p",[e._v("前端性能的一个重要指标是页面加载时间，不仅事关用户体验，也是搜索引擎排名考虑的一个因素。")]),e._v(" "),a("ul",[a("li",[e._v("来自Google的数据表明，一个有10条数据0.4秒能加载完的页面，变成30条数据0.9秒加载完之后，流量和广告收入下降"),a("code",[e._v("90%")]),e._v("。")]),e._v(" "),a("li",[e._v("Google Map 首页文件大小从"),a("code",[e._v("100KB")]),e._v("减小到"),a("code",[e._v("70-80KB")]),e._v("后，流量在第一周涨了"),a("code",[e._v("10%")]),e._v("，接下来的三周涨了"),a("code",[e._v("25%")]),e._v("。")]),e._v(" "),a("li",[e._v("亚马逊的数据表明：加载时间增加"),a("code",[e._v("100毫秒")]),e._v("，销量就"),a("code",[e._v("下降1%")]),e._v("。")])]),e._v(" "),a("p",[e._v("所以：重铸性能之光，我辈义不容辞😎")]),e._v(" "),a("h2",{attrs:{id:"一、调试工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、调试工具"}},[e._v("#")]),e._v(" 一、调试工具")]),e._v(" "),a("p",[a("strong",[e._v("磨刀不误砍柴工，读完大学再打工！")])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab4bef4550cf4e40986401df9a76199f~tplv-k3u1fbpfcp-watermark.image",alt:""}}),e._v(" "),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9572961cbcf64c7bb750387b67d74443~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"_1、network"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、network"}},[e._v("#")]),e._v(" 1、Network")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62898f76c242450eb318b1816428ff65~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("这里可以看到资源加载详情，初步评估影响"),a("code",[e._v("页面性能")]),e._v("的因素。鼠标右键可以自定义选项卡，页面底部是当前加载资源的一个概览。"),a("code",[e._v("DOMContentLoaded")]),e._v(" DOM渲染完成的时间，"),a("code",[e._v("Load")]),e._v("：当前页面所有资源加载完成的时间")]),e._v(" "),a("h4",{attrs:{id:"思考-如何判断哪些资源对当前页面加载无用-做对应优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#思考-如何判断哪些资源对当前页面加载无用-做对应优化"}},[e._v("#")]),e._v(" 思考：如何判断哪些资源对当前页面加载无用，做对应优化？")]),e._v(" "),a("p",[a("strong",[e._v("shift + cmd + P  调出控制台的扩展工具，添加规则")]),e._v(" "),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a5141f1221f0494a93ace014e64b20ba~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h4",{attrs:{id:"扩展工具-更多使用姿势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扩展工具-更多使用姿势"}},[e._v("#")]),e._v(" 扩展工具 更多使用姿势")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/578d7c1aec9b4ea2ae1d17e4ceef6857~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h4",{attrs:{id:"瀑布流waterfall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#瀑布流waterfall"}},[e._v("#")]),e._v(" 瀑布流waterfall")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1613fbeaffb64587a36613271ecfcade~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Queueing")]),e._v(" 浏览器将资源放入队列时间")]),e._v(" "),a("li",[a("code",[e._v("Stalled")]),e._v(" 因放入队列时间而发生的停滞时间")]),e._v(" "),a("li",[a("code",[e._v("DNS Lookup")]),e._v(" DNS解析时间")]),e._v(" "),a("li",[a("code",[e._v("Initial connection")]),e._v("  建立HTTP连接的时间")]),e._v(" "),a("li",[a("code",[e._v("SSL")]),e._v(" 浏览器与服务器建立安全性连接的时间")]),e._v(" "),a("li",[a("code",[e._v("TTFB")]),e._v(" 等待服务端返回数据的时间")]),e._v(" "),a("li",[a("code",[e._v("Content Download")]),e._v("  浏览器下载资源的时间")])]),e._v(" "),a("h3",{attrs:{id:"_2、lighthouse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、lighthouse"}},[e._v("#")]),e._v(" 2、Lighthouse")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce06248190e44dd4b043b168e596251f~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("ul",[a("li",[a("code",[e._v("First Contentful Paint")]),e._v("  首屏渲染时间，1s以内绿色")]),e._v(" "),a("li",[a("code",[e._v("Speed Index")]),e._v("  速度指数，4s以内绿色")]),e._v(" "),a("li",[a("code",[e._v("Time to Interactive")]),e._v(" 到页面可交换的时间")])]),e._v(" "),a("p",[e._v("根据chrome的一些策略自动对网站做一个质量评估，并且会给出一些优化的建议。")]),e._v(" "),a("h3",{attrs:{id:"_3、peformance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、peformance"}},[e._v("#")]),e._v(" 3、Peformance")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56fbfc64c756487c9ae61c9f59de9add~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("对网站最专业的分析~后面会多次讲到")]),e._v(" "),a("h3",{attrs:{id:"_4、webpagetest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、webpagetest"}},[e._v("#")]),e._v(" 4、webPageTest")]),e._v(" "),a("p",[e._v("可以模拟不同场景下访问的情况，比如模拟不同浏览器、不同国家等等，在线测试地址："),a("a",{attrs:{href:"https://www.webpagetest.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("webPageTest"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1da6a84b5944311a4f8c6f78b2f5fa1~tplv-k3u1fbpfcp-watermark.image",alt:""}}),e._v(" "),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2fd7f9c05be47bb80ad67064fc72917~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"_5、资源打包分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、资源打包分析"}},[e._v("#")]),e._v(" 5、资源打包分析")]),e._v(" "),a("h4",{attrs:{id:"webpack-bundle-analyzer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-bundle-analyzer"}},[e._v("#")]),e._v(" webpack-bundle-analyzer")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1575bf78f22243bcb393b8dbc23d395b~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm install --save-dev webpack-bundle-analyzer\n// webpack.config.js 文件\nconst BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin\nmodule.exports={\n  plugins: [\n    new BundleAnalyzerPlugin({\n          analyzerMode: 'server',\n          analyzerHost: '127.0.0.1',\n          analyzerPort: 8889,\n          reportFilename: 'report.html',\n          defaultSizes: 'parsed',\n          openAnalyzer: true,\n          generateStatsFile: false,\n          statsFilename: 'stats.json',\n          statsOptions: null,\n          logLevel: 'info'\n        }),\n  ]\n}\n\n// package.json\n\"analyz\": \"NODE_ENV=production npm_config_report=true npm run build\"\n\n")])])]),a("h4",{attrs:{id:"开启source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启source-map"}},[e._v("#")]),e._v(" 开启source-map")]),e._v(" "),a("p",[a("code",[e._v("webpack.config.js")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("module.exports = {\n    mode: 'production',\n    devtool: 'hidden-source-map',\n}\n")])])]),a("p",[a("code",[e._v("package.json")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"analyze": "source-map-explorer \'build/*.js\'",\n')])])]),a("p",[a("code",[e._v("npm run analyze")]),e._v(" "),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2057c48588f942579c235925d943c162~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"二、web-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、web-api"}},[e._v("#")]),e._v(" 二、WEB API")]),e._v(" "),a("p",[e._v("工欲善其事，必先利其器。浏览器提供的一些分析API"),a("code",[e._v("至关重要")])]),e._v(" "),a("h3",{attrs:{id:"_1、监听视窗激活状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、监听视窗激活状态"}},[e._v("#")]),e._v(" 1、监听视窗激活状态")]),e._v(" "),a("p",[e._v("大学都刷过慕课吧？只要离开窗口视频就会暂停~")]),e._v(" "),a("p",[e._v("或者一些考试网站，提醒你不能离开当前窗口")]),e._v(" "),a("p",[e._v("再或者，这种效果~\n"),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b7ab11fc7b94fcf8c79bd3b28706b2c~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// 窗口激活状态监听\nlet vEvent = 'visibilitychange';\nif (document.webkitHidden != undefined) {\n    vEvent = 'webkitvisibilitychange';\n}\n\nfunction visibilityChanged() {\n    if (document.hidden || document.webkitHidden) {\n        document.title = '客官，别走啊~'\n        console.log(\"Web page is hidden.\")\n    } else {\n        document.title = '客官，你又回来了呢~'\n        console.log(\"Web page is visible.\")\n    }\n}\n\ndocument.addEventListener(vEvent, visibilityChanged, false);\n")])])]),a("p",[e._v("其实有很多隐藏的api，这里大家有兴趣的可以去试试看：")]),e._v(" "),a("h3",{attrs:{id:"_2、观察长任务-performance-中task"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、观察长任务-performance-中task"}},[e._v("#")]),e._v(" 2、观察长任务（performance 中Task）")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const observer = new PerformanceObserver((list) => {\n    for (const entry of list.getEntries()) {\n        console.log(entry)\n    }\n})\n\nobserver.observe({entryTypes: ['longtask']})\n")])])]),a("h3",{attrs:{id:"_3、监听网络变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、监听网络变化"}},[e._v("#")]),e._v(" 3、监听网络变化")]),e._v(" "),a("p",[e._v("网络变化时给用户反馈网络问题，有时候看直播的时候自己的网络卡顿，直播平台也会提醒你或者自动给你切换清晰度")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;\nvar type = connection.effectiveType;\n\nfunction updateConnectionStatus() {\n  console.log("Connection type changed from " + type + " to " + connection.effectiveType);\n  type = connection.effectiveType;\n}\n\nconnection.addEventListener(\'change\', updateConnectionStatus);\n')])])]),a("h3",{attrs:{id:"_4、计算domcontentloaded时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、计算domcontentloaded时间"}},[e._v("#")]),e._v(" 4、计算DOMContentLoaded时间")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("window.addEventListener('DOMContentLoaded', (event) => {\n    let timing = performance.getEntriesByType('navigation')[0];\n    console.log(timing.domInteractive);\n    console.log(timing.fetchStart);\n    let diff = timing.domInteractive - timing.fetchStart;\n    console.log(\"TTI: \" + diff);\n})\n")])])]),a("h3",{attrs:{id:"_5、更多计算规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、更多计算规则"}},[e._v("#")]),e._v(" 5、更多计算规则")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("DNS 解析耗时: domainLookupEnd - domainLookupStart\nTCP 连接耗时: connectEnd - connectStart\nSSL 安全连接耗时: connectEnd - secureConnectionStart\n网络请求耗时 (TTFB): responseStart - requestStart\n数据传输耗时: responseEnd - responseStart\nDOM 解析耗时: domInteractive - responseEnd\n资源加载耗时: loadEventStart - domContentLoadedEventEnd\nFirst Byte时间: responseStart - domainLookupStart\n白屏时间: responseEnd - fetchStart\n首次可交互时间: domInteractive - fetchStart\nDOM Ready 时间: domContentLoadEventEnd - fetchStart\n页面完全加载时间: loadEventStart - fetchStart\nhttp 头部大小： transferSize - encodedBodySize\n重定向次数：performance.navigation.redirectCount\n重定向耗时: redirectEnd - redirectStart\n")])])]),a("h2",{attrs:{id:"三、老生常谈-雅虎军规"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、老生常谈-雅虎军规"}},[e._v("#")]),e._v(" 三、老生常谈，雅虎军规")]),e._v(" "),a("p",[e._v("磨好刀了，就该想想往哪里捅比较好了~ 🗡🗡🗡")]),e._v(" "),a("p",[e._v("关于雅虎军规，你知道的有多少条，平时写用到的又有哪些？针对以下规则，我们可以做很多优化工作")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bda756efa4f546e3b2fd6744e2e3336c~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"_1、减少cookie传输"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、减少cookie传输"}},[e._v("#")]),e._v(" 1、减少cookie传输")]),e._v(" "),a("p",[e._v("cookie传输会造成带宽浪费，可以：")]),e._v(" "),a("ul",[a("li",[e._v("减少cookie中存储的东西")]),e._v(" "),a("li",[e._v("静态资源不需要cookie，可以采用其他的域名，不会主动带上cookie。")])]),e._v(" "),a("h3",{attrs:{id:"_2、避免过多的回流与重绘"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、避免过多的回流与重绘"}},[e._v("#")]),e._v(" 2、避免过多的回流与重绘")]),e._v(" "),a("p",[e._v("连续触发页面回流操作")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  let cards = document.getElementsByClassName(\"MuiPaper-rounded\");\n  const update = (timestamp) => {\n    for (let i = 0; i <cards.length; i++) {\n      let top = cards[i].offsetTop;\n      cards[i].style.width = ((Math.sin(cards[i].offsetTop + timestamp / 100 + 1) * 500) + 'px')\n    }\n    window.requestAnimationFrame(update)\n  }\n  update(1000);\n")])])]),a("p",[e._v("看下效果，很明显的卡顿\n"),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7618dea1a4774c8685e9926b08d67fdd~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[a("code",[e._v("performance")]),e._v("分析结果，"),a("code",[e._v("load")]),e._v("事件之后存在大量的回流，并且"),a("code",[e._v("chrome")]),e._v("都给标记了红色\n"),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b543d68fab7445da1dedb72bb224f69~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("使用"),a("code",[e._v("fastDom")]),e._v("进行优化，将对dom的"),a("code",[e._v("读和写")]),e._v("分离，合并")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(' let cards = document.getElementsByClassName("MuiPaper-rounded");\n  const update = (timestamp) => {\n    for (let i = 0; i < cards.length; i++) {\n      fastdom.measure(() => {\n        let top = cards[i].offsetTop;\n        fastdom.mutate(() => {\n          cards[i].style.width =\n            Math.sin(top + timestamp / 100 + 1) * 500 + "px";\n        });\n      });\n    }\n    window.requestAnimationFrame(update)\n  }\n  update(1000);\n')])])]),a("p",[e._v("再看下效果，很流畅~\n"),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1df5c32c30494c13b3402305f866b327~tplv-k3u1fbpfcp-watermark.image",alt:""}}),e._v(" "),a("code",[e._v("performance")]),e._v("分析结果，load事件之后也没有了那么多的红色标记\n"),a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/db47cc5e20544043b9a5293c311dc0fe~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("感兴趣的可以去了解一下fastDom："),a("a",{attrs:{href:"https://github.com/wilsonpage/fastdom",target:"_blank",rel:"noopener noreferrer"}},[e._v("github fastdom"),a("OutboundLink")],1),e._v("\n在线预览："),a("a",{attrs:{href:"http://wilsonpage.github.io/fastdom/examples/animation.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("fastdom demo"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("关于任务拆分与组合的思想，"),a("code",[e._v("react fiber")]),e._v("架构做的很牛逼，有兴趣的可以去了解一下调度算法在fiber中的实践")]),e._v(" "),a("h2",{attrs:{id:"四、压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、压缩"}},[e._v("#")]),e._v(" 四、压缩")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f36c2c1160134cb0a12083962a039e8b~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("嗯哼哼、确定一下没有走错场子，继续继续！")]),e._v(" "),a("h3",{attrs:{id:"_1、gzip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、gzip"}},[e._v("#")]),e._v(" 1、Gzip")]),e._v(" "),a("p",[e._v("开启方式可参考："),a("a",{attrs:{href:"https://juejin.cn/post/6844903605187641357",target:"_blank",rel:"noopener noreferrer"}},[e._v("nginx开启gzip"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/28b74a28cf2f4646bd3890c2a6ebdfd9~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("还有一种方式：打包的时候生成gz文件，上传到服务器端，这样就不需要nginx来压缩了，可以降低服务器压力。\n可参考："),a("a",{attrs:{href:"https://segmentfault.com/a/1190000020976930",target:"_blank",rel:"noopener noreferrer"}},[e._v("gzip压缩文件&webPack配置Compression-webpack-plugin"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"_2、服务端压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、服务端压缩"}},[e._v("#")]),e._v(" 2、服务端压缩")]),e._v(" "),a("p",[a("code",[e._v("server.js")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const express = require('express');\nconst app = express();\nconst fs = require('fs');\nconst compression = require('compression');\nconst path = require('path');\n\n\napp.use(compression());\napp.use(express.static('build'));\n\napp.get('*', (req,res) =>{\n    res.sendFile(path.join(__dirname+'/build/index.html'));\n});\n\nconst listener = app.listen(process.env.PORT || 3000, function () {\n    console.log(`Listening on port ${listener.address().port}`);\n});\n")])])]),a("p",[a("code",[e._v("package.json")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"start": "npm run build && node server.js",\n')])])]),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9fbe174e17054f0a9d0bc66e53d31b5c~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"_3、javascript、css、html压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、javascript、css、html压缩"}},[e._v("#")]),e._v(" 3、JavaScript、Css、Html压缩")]),e._v(" "),a("p",[e._v("工程化项目中直接使用对应的插件即可，webpack的主要有下面三个：")]),e._v(" "),a("ul",[a("li",[e._v("UglifyJS")]),e._v(" "),a("li",[e._v("webpack-parallel-uglify-plugin")]),e._v(" "),a("li",[e._v("terser-webpack-plugin\n具体优缺点可参考："),a("a",{attrs:{href:"https://blog.csdn.net/qq_24147051/article/details/103557728",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack常用的三种JS压缩插件"),a("OutboundLink")],1),e._v("。"),a("code",[e._v("压缩原理")]),e._v("简单的讲就是去除一些空格、换行、注释，借助es6模块化的功能，做了一些"),a("code",[e._v("tree-shaking")]),e._v("的优化。同时做了一些代码混淆，一方面是为了更小的体积，另一方面也是为了源码的安全性。")])]),e._v(" "),a("p",[e._v("css压缩主要是mini-css-extract-plugin，当然前面的js压缩插件也会给你做好css压缩。使用姿势：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('npm install --save-dev mini-css-extract-plugin\nconst MiniCssExtractPlugin = require("mini-css-extract-plugin");\nplugins:[\n new MiniCssExtractPlugin({\n       filename: "[name].css",\n       chunkFilename: "[id].css"\n   })\n]\n')])])]),a("p",[e._v("html压缩可以用"),a("code",[e._v("HtmlWebpackPlugin")]),e._v("，单页项目就一个index.html,性能提升微乎其微~")]),e._v(" "),a("h3",{attrs:{id:"_4、http2首部压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、http2首部压缩"}},[e._v("#")]),e._v(" 4、http2首部压缩")]),e._v(" "),a("p",[a("strong",[e._v("http2的特点")])]),e._v(" "),a("ul",[a("li",[e._v("二进制分帧")]),e._v(" "),a("li",[e._v("首部压缩")]),e._v(" "),a("li",[e._v("流量控制")]),e._v(" "),a("li",[e._v("多路复用")]),e._v(" "),a("li",[e._v("请求优先级")]),e._v(" "),a("li",[e._v("服务器推送"),a("code",[e._v("http2_push: 'xxx.jpg'")]),e._v("\n具体升级方式也很简单，修改一下nginx配置，方法请自行"),a("code",[e._v("Google")])])]),e._v(" "),a("h2",{attrs:{id:"五、webpack优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、webpack优化"}},[e._v("#")]),e._v(" 五、webpack优化")]),e._v(" "),a("p",[e._v("上文中也提到了部分webpack插件，下面我再来看看还有哪些~")]),e._v(" "),a("h3",{attrs:{id:"_1、dllplugin-提升构建速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、dllplugin-提升构建速度"}},[e._v("#")]),e._v(" 1、DllPlugin 提升构建速度")]),e._v(" "),a("p",[e._v("通过"),a("code",[e._v("DllPlugin")]),e._v("插件，将一些比较大的，基本很少升级的包拆分出来，生成"),a("code",[e._v("xx.dll.js")]),e._v("文件,通过"),a("code",[e._v("manifest.json")]),e._v("引用")]),e._v(" "),a("p",[a("code",[e._v("webpack.dll.config.js")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('const path = require("path");\nconst webpack = require("webpack");\nmodule.exports = {\n    mode: "production",\n    entry: {\n        react: ["react", "react-dom"],\n    },\n    output: {\n        filename: "[name].dll.js",\n        path: path.resolve(__dirname, "dll"),\n        library: "[name]"\n    },\n    plugins: [\n        new webpack.DllPlugin({\n            name: "[name]",\n            path: path.resolve(__dirname, "dll/[name].manifest.json")\n        })\n    ]\n};\n')])])]),a("p",[a("code",[e._v("package.json")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"scripts": {\n    "dll-build": "NODE_ENV=production webpack --config webpack.dll.config.js",\n  },\n')])])]),a("h3",{attrs:{id:"_2、splitchunks-拆包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、splitchunks-拆包"}},[e._v("#")]),e._v(" 2、splitChunks 拆包")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("optimization: {\n        splitChunks: {\n            cacheGroups: {\n                vendor: {\n                    name: 'vendor',\n                    test: /[\\\\/]node_modules[\\\\/]/,\n                    minSize: 0,\n                    minChunks: 1,\n                    priority: 10,\n                    chunks: 'initial'\n                },\n                common: {\n                    name: 'common',\n                    test: /[\\\\/]src[\\\\/]/,\n                    chunks: 'all',\n                    minSize: 0,\n                    minChunks: 2\n                }\n            }\n        }\n    },\n")])])]),a("h2",{attrs:{id:"六、骨架屏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、骨架屏"}},[e._v("#")]),e._v(" 六、骨架屏")]),e._v(" "),a("p",[e._v("用css提前占好位置，当资源加载完成即可填充，减少页面的回流与重绘，同时还能给用户最直接的反馈。\n图中使用插件："),a("a",{attrs:{href:"https://github.com/buildo/react-placeholder",target:"_blank",rel:"noopener noreferrer"}},[e._v("react-placeholder"),a("OutboundLink")],1),e._v(" "),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3666ae07b9eb4d839f7a893b89d83f47~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("关于实现骨架屏还有很多种方案，用"),a("code",[e._v("Puppeteer")]),e._v("服务端渲染的挺多的")]),e._v(" "),a("p",[e._v("使用css伪类："),a("a",{attrs:{href:"https://segmentfault.com/a/1190000020437426",target:"_blank",rel:"noopener noreferrer"}},[e._v("只要css就能实现的骨架屏方案"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("等等")]),e._v(" "),a("h2",{attrs:{id:"七、窗口化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、窗口化"}},[e._v("#")]),e._v(" 七、窗口化")]),e._v(" "),a("p",[e._v("原理：只加载当前窗口能显示的DOM元素，当视图变化时，删除隐藏的，添加要显示的DOM就可以保证页面上存在的dom元素数量永远不多，页面就不会卡顿")]),e._v(" "),a("p",[e._v("图中使用的插件："),a("a",{attrs:{href:"https://github.com/bvaughn/react-window",target:"_blank",rel:"noopener noreferrer"}},[e._v("react-window"),a("OutboundLink")],1),e._v(" "),a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a459cc811844b7793aff6c9878d19ad~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("安装："),a("code",[e._v("npm i react-window")])]),e._v(" "),a("p",[e._v("引入："),a("code",[e._v("import { FixedSizeList as List } from 'react-window';")])]),e._v(" "),a("p",[e._v("使用：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("const Row = ({ index, style }) => (\n  <div style={style}>Row {index}</div>\n);\n \nconst Example = () => (\n  <List\n    height={150}\n    itemCount={1000}\n    itemSize={35}\n    width={300}\n  >\n    {Row}\n  </List>\n);\n")])])]),a("h2",{attrs:{id:"八、缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八、缓存"}},[e._v("#")]),e._v(" 八、缓存")]),e._v(" "),a("h3",{attrs:{id:"_1、http缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、http缓存"}},[e._v("#")]),e._v(" 1、http缓存")]),e._v(" "),a("h4",{attrs:{id:"keep-alive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keep-alive"}},[e._v("#")]),e._v(" keep-alive")]),e._v(" "),a("p",[e._v("判断是否开启：看"),a("code",[e._v("response headers")]),e._v("中有没有"),a("code",[e._v("Connection: keep-alive")]),e._v("\n。开启以后，看"),a("code",[e._v("network")]),e._v("的瀑布流中就没有 "),a("code",[e._v("Initial connection")]),e._v("耗时了")]),e._v(" "),a("p",[e._v("nginx设置keep-alive（默认开启）")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# 0 为关闭\n#keepalive_timeout 0;\n# 65s无连接 关闭\nkeepalive_timeout 65;\n# 连接数，达到100断开\nkeepalive_requests 100;\n")])])]),a("h4",{attrs:{id:"cache-control-expires-max-age"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache-control-expires-max-age"}},[e._v("#")]),e._v(" Cache-Control / Expires / Max-Age")]),e._v(" "),a("p",[e._v("设置资源是否缓存，以及缓存时间")]),e._v(" "),a("h4",{attrs:{id:"etag-if-none-match"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etag-if-none-match"}},[e._v("#")]),e._v(" Etag / If-None-Match")]),e._v(" "),a("p",[e._v("资源唯一标识作对比，如果有变化，从服务器拉取资源。如果没变化则取缓存资源，状态码304，也就是协商缓存")]),e._v(" "),a("h4",{attrs:{id:"last-modified-if-modified-since"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#last-modified-if-modified-since"}},[e._v("#")]),e._v(" Last-Modified / If-Modified-Since")]),e._v(" "),a("p",[e._v("通过对比时间的差异来觉得要不要从服务器获取资源")]),e._v(" "),a("p",[e._v("更多HTTP缓存参数可参考："),a("a",{attrs:{href:"https://harttle.land/2017/04/04/using-http-cache.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用 HTTP 缓存：Etag, Last-Modified 与 Cache-Control"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"_2、service-worker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、service-worker"}},[e._v("#")]),e._v(" 2、Service Worker")]),e._v(" "),a("p",[e._v("借助webpack插件"),a("code",[e._v("WorkboxWebpackPlugin")]),e._v("和"),a("code",[e._v("ManifestPlugin")]),e._v(",加载serviceWorker.js,通过"),a("code",[e._v("serviceWorker.register()")]),e._v("注册")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("new WorkboxWebpackPlugin.GenerateSW({\n    clientsClaim: true,\n    exclude: [/\\.map$/, /asset-manifest\\.json$/],\n    importWorkboxFrom: 'cdn',\n    navigateFallback: paths.publicUrlOrPath + 'index.html',\n    navigateFallbackBlacklist: [\n        new RegExp('^/_'),\n        new RegExp('/[^/?]+\\\\.[^/]+$'),\n    ],\n}),\n\nnew ManifestPlugin({\n    fileName: 'asset-manifest.json',\n    publicPath: paths.publicUrlOrPath,\n    generate: (seed, files, entrypoints) => {\n        const manifestFiles = files.reduce((manifest, file) => {\n            manifest[file.name] = file.path;\n            return manifest;\n        }, seed);\n        const entrypointFiles = entrypoints.app.filter(\n            fileName => !fileName.endsWith('.map')\n        );\n\n        return {\n            files: manifestFiles,\n            entrypoints: entrypointFiles,\n        };\n    },\n}),\n")])])]),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24a6ef60ee9a4e44b4456e401f2dbcfe~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"九、预加载-懒加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#九、预加载-懒加载"}},[e._v("#")]),e._v(" 九、预加载 && 懒加载")]),e._v(" "),a("h3",{attrs:{id:"_1、preload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、preload"}},[e._v("#")]),e._v(" 1、preload")]),e._v(" "),a("p",[e._v("就拿demo中的字体举例，正常情况下的加载顺序是这样的：\n"),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6e3226bc21f14a41ac195618456bdde9~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[a("code",[e._v("加入preload：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<link rel="preload" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.119.woff2" as="font" crossorigin="anonymous"/> \n<link rel="preload" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.118.woff2" as="font" crossorigin="anonymous"/> \n<link rel="preload" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.116.woff2" as="font" crossorigin="anonymous"/> \n')])])]),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9790c73b17ef43a9acb1701215aca9d4~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"_2、prefetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、prefetch"}},[e._v("#")]),e._v(" 2、prefetch")]),e._v(" "),a("p",[e._v("场景：首页不需要这样的字体文件，下个页面需要：首页会以最低优先级Lowest来提前加载")]),e._v(" "),a("p",[a("code",[e._v("加入prefetch：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<link rel="prefetch" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.113.woff2" as="font"/> \n<link rel="prefetch" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.118.woff2" as="font"/> \n<link rel="prefetch" href="https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.117.woff2" as="font"/> \n')])])]),a("p",[e._v("需要的页面，从"),a("code",[e._v("prefetch cache")]),e._v("中取\n"),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04a0fe68e9634c20b963d1d2817126ad~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[e._v("webpack也是支持这两个属性的:"),a("a",{attrs:{href:"https://www.cnblogs.com/skychx/p/webpack-webpackChunkName-webpackPreload-webpackPreload.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpackPrefetch 和 webpackPreload"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"_3、懒加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、懒加载"}},[e._v("#")]),e._v(" 3、懒加载")]),e._v(" "),a("h4",{attrs:{id:"图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片"}},[e._v("#")]),e._v(" 图片")]),e._v(" "),a("p",[a("code",[e._v("机械图片")]),e._v(" "),a("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ed9e510588748d7b46d58d4ad13b4fe~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[a("code",[e._v("渐进式图片（类似高斯模糊）")]),e._v("\n需要UI小姐姐出稿的时候指定这种格式\n"),a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/070b324836b44beb80453f4bc5cccc0b~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("p",[a("code",[e._v("响应式图片")])]),e._v(" "),a("p",[e._v("原生模式："),a("code",[e._v('<img src="./img/index.jpg" sizes="100vw" srcset="./img/dog.jpg 800w, ./img/index.jpg 1200w"/>')]),e._v(" "),a("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7427e9243791461b8ffa49f47981cfba~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h4",{attrs:{id:"路由懒加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由懒加载"}},[e._v("#")]),e._v(" 路由懒加载")]),e._v(" "),a("p",[e._v("通过函数 + import实现")]),e._v(" "),a("p",[a("code",[e._v("const Page404 = () => import(/* webpackChunkName: \"error\" */'@views/errorPage/404');")])]),e._v(" "),a("h2",{attrs:{id:"十、ssr-react-snap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十、ssr-react-snap"}},[e._v("#")]),e._v(" 十、ssr && react-snap")]),e._v(" "),a("ul",[a("li",[e._v("服务端渲染SSR，vue使用nuxt.js，react使用next.js")]),e._v(" "),a("li",[e._v("react-snap可以借助Puppeteer实现先渲染单页，然后保留DOM，发送到客户端")])]),e._v(" "),a("h2",{attrs:{id:"十一、体验优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#十一、体验优化"}},[e._v("#")]),e._v(" 十一、体验优化")]),e._v(" "),a("h3",{attrs:{id:"白屏loading"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#白屏loading"}},[e._v("#")]),e._v(" 白屏loading")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41557f3a361c4cf899a4eab3bde79154~tplv-k3u1fbpfcp-watermark.image",alt:""}}),e._v(" "),a("strong",[e._v("loading.html")]),e._v(" 需要自取哦，还有种方式，使用"),a("code",[e._v("webpack")]),e._v("插件"),a("code",[e._v("HtmlWebpackPlugin")]),e._v("将loading资源插入到页面中")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Loading</title>\n    <style>\n      body {\n        margin: 0;\n      }\n      #loadding {\n        position: fixed;\n        top: 0;\n        bottom: 0;\n        display: flex;\n        width: 100%;\n        align-items: center;\n        justify-content: center;\n      }\n      #loadding > span {\n        display: inline-block;\n        width: 8px;\n        height: 100%;\n        margin-right: 5px;\n        border-radius: 4px;\n        -webkit-animation: load 1.04s ease infinite;\n        animation: load 1.04s ease infinite;\n      }\n      @keyframes load {\n        0%,\n        100% {\n          height: 40px;\n          background: #98beff;\n        }\n        50% {\n          height: 60px;\n          margin-top: -20px;\n          background: #3e7fee;\n        }\n      }\n    </style>\n  </head>\n\n  <body>\n    <div id="loadding">\n      <span></span>\n      <span style="animation-delay: 0.13s"></span>\n      <span style="animation-delay: 0.26s"></span>\n      <span style="animation-delay: 0.39s"></span>\n      <span style="animation-delay: 0.52s"></span>\n    </div>\n  </body>\n  <script>\n    window.addEventListener("DOMContentLoaded", () => {\n      const $loadding = document.getElementById("loadding");\n      if (!$loadding) {\n        return;\n      }\n      $loadding.style.display = "none";\n      $loadding.parentNode.removeChild($loadding);\n    });\n  <\/script>\n</html>\n')])])]),a("h2",{attrs:{id:"招聘小广告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#招聘小广告"}},[e._v("#")]),e._v(" 招聘小广告")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("微医集团")]),e._v(" 医院支撑组")]),e._v(" "),a("li",[e._v("坐标：浙江杭州")]),e._v(" "),a("li",[e._v("社招3年+ 或者 21届实习")]),e._v(" "),a("li",[e._v("简历邮箱： wujj@wedoctor.com")])]),e._v(" "),a("h2",{attrs:{id:"更多性能优化-敬请期待"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更多性能优化-敬请期待"}},[e._v("#")]),e._v(" 更多性能优化，敬请期待~")]),e._v(" "),a("p",[e._v("学习 + 整理这些花了很长时间，路过的大哥们、小姐姐们还请给个赞👍，有问题的也可留言交流哈😝")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f54ccd795016409cb57c1a72aa28a75e~tplv-k3u1fbpfcp-watermark.image",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[e._v("#")]),e._v(" 参考文章：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://coding.imooc.com/class/448.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mr.Max慕课主页"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6844903657318645767#heading-1",target:"_blank",rel:"noopener noreferrer"}},[e._v("前端性能优化之雅虎35条军规"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000012220132",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack实践——webpack-bundle-analyzer 的使用"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6844903605187641357",target:"_blank",rel:"noopener noreferrer"}},[e._v("nginx开启gzip"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000020976930",target:"_blank",rel:"noopener noreferrer"}},[e._v("gzip压缩文件&webPack配置Compression-webpack-plugin"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/qq_24147051/article/details/103557728",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack常用的三种JS压缩插件"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000020437426",target:"_blank",rel:"noopener noreferrer"}},[e._v("只要css就能实现的骨架屏方案"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://harttle.land/2017/04/04/using-http-cache.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用 HTTP 缓存：Etag, Last-Modified 与 Cache-Control"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/skychx/p/webpack-webpackChunkName-webpackPreload-webpackPreload.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpackPrefetch 和 webpackPreload"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);